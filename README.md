# Binary-exploitation 
Reversing Binaries is the first cyber sport started in the late 1960's according to me xD Its fun you know. Now we have CTF, people who give us a beautiful platform to explode our mind into the matrix. I recommend you to perform these exploitation on windows 7 for better understading of latest windows architecture. Choose your programming language wisely, it should be comfortable, just for that sake. And I also recommend you to play fair and support opensource.

## Identify Bug

![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/1.1_BOF_creating_bug.gif)
## Exploitation Techniques

### Overwrite EIP and ESP
Load the program in debugger and load the exploit file in my case I am taking rm2mp3 as the buggy application. Ok load the exploit in rm2mp3 application and check the ESP and EIP in the debugger if they are overwritten than you are ready to create your full flash exploit.
![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/1.2_Overwrite_EIP_ESP.png)

### Genrate Offset
To generate the offset using metasploit tool "pattern_create" or you can use mona.py for the same purpose. Overwrite the EIP. Copy the data in EIP to check the offset of the pattern. Just add that number of bytes to the junk data supplied to the exploit.

`/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 5000` <br />

![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/2.1_Create_pattern_offset.png)

Look for EIP data

![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/2.2_Look_for_eip_data.png)

`/usr/share/metasploit-framework/tools/exploit/pattern_offset.rb -q {EIP_DATA}`

![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/2.3_Finding_offset.png)

### Explotation with JMP ESP
So enough playing with EIP and ESP after all its fun. Now time to make a real working P0C so for that proof we will take JMP ESP to chase our goal.

### Search for JMP ESP
Load the application in the debugger. Search "JMP ESP" in all inter modules and command. Note only that memory address of JMP ESP which comes into play when you load the file. On windows 7 note that address changes on every execution because of ASLR so here is the trick to overcome this problem "Do it on real time".

![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/3.1_Search_jmp_esp.png)

### Note down the memory address

![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/3.2_Search_jmp_esp_2.png)

### Genrate calculator payload with msfvenom
So here you can genrate the payload for the reflection of your work it can be dark or it can be bright. So I choose to be on the bright side of github and will go with the calculator as a proof of concept. So here is the script to generate a calculator.

` msfvenom -a x86 --platform Windows -p windows/exec cmd=calc.exe -e x86/alpha_mixed -f python`

![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/4_msf_venom.png)

### Overwrite EIP with JMP ESP address

Overwrite EIP with JMP ESP instruction address and add plenty of NOP's in the memory so your instruction will fall on the right place of the stack. Now load the exploit and you will see a calculator  which we actually consider as a proof of concept.

![alt text](https://github.com/psyrun/Binary-exploitation/blob/master/5_Final_POC.png)


### Exploitation with pop pop ret


### Exploitation with SEH

## ROP chaining


## Egg Hunting

## Requirements

### OllyDbg / ImmunityDbg /x32dbg.
